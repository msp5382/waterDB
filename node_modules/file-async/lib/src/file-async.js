'use strict';

var _bluebird = require('bluebird');

var _bluebird2 = _interopRequireDefault(_bluebird);

var _fsExtra = require('fs-extra');

var _fsExtra2 = _interopRequireDefault(_fsExtra);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var final = {
  existsCallback: _fsExtra2.default.exists.bind(_fsExtra2.default),
  exists: function exists(full_path) {
    var _this = this;

    return new _bluebird2.default.Promise(function (resolve) {
      _this.existsCallback(full_path, resolve);
    });
  }
};

var async_methods = [];
var async_object = _bluebird2.default.promisifyAll(_fsExtra2.default, {
  // Skip .*Sync methods
  filter: function filter(name, func, target, passesDefaultFilter) {
    if (passesDefaultFilter && target === _fsExtra2.default && !final[name]) {
      if (name.match(/Sync$/)) {
        final[name] = _fsExtra2.default[name].bind(_fsExtra2.default);
      } else {
        async_methods.push(name);
        return true;
      }
    }
    return false;
  }
});

// Rename .*Async methods
async_methods.forEach(function (method) {
  final[method + "Callback"] = _fsExtra2.default[method];
  final[method] = async_object[method + "Async"].bind(async_object);
});

module.exports = final;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGUtYXN5bmMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBR0EsSUFBSSxLQUFLLEdBQUc7QUFDVixnQkFBYyxFQUFFLGtCQUFNLE1BQU0sQ0FBQyxJQUFJLG1CQUFPO0FBQ3hDLFFBQU0sRUFBRSxnQkFBVSxTQUFTLEVBQUU7OztBQUMzQixXQUFPLElBQUksbUJBQUcsT0FBTyxDQUFDLFVBQUMsT0FBTyxFQUFLO0FBQ2pDLFlBQUssY0FBYyxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztLQUN6QyxDQUFDLENBQUM7R0FDSjtDQUNGLENBQUM7O0FBRUYsSUFBSSxhQUFhLEdBQUcsRUFBRSxDQUFDO0FBQ3ZCLElBQUksWUFBWSxHQUFJLG1CQUFHLFlBQVksb0JBQVE7O0FBRXpDLFFBQU0sRUFBRSxnQkFBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxtQkFBbUIsRUFBSztBQUNuRCxRQUFJLG1CQUFtQixJQUFJLE1BQU0sc0JBQVUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtBQUMzRCxVQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUU7QUFDdkIsYUFBSyxDQUFDLElBQUksQ0FBQyxHQUFHLGtCQUFNLElBQUksQ0FBQyxDQUFDLElBQUksbUJBQU8sQ0FBQztPQUN2QyxNQUFNO0FBQ0wscUJBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDekIsZUFBTyxJQUFJLENBQUM7T0FDYjtLQUNGO0FBQ0QsV0FBTyxLQUFLLENBQUM7R0FDZDtDQUNGLENBQUM7OztBQUFDLEFBR0gsYUFBYSxDQUFDLE9BQU8sQ0FBQyxVQUFDLE1BQU0sRUFBSztBQUNoQyxPQUFLLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQyxHQUFHLGtCQUFNLE1BQU0sQ0FBQyxDQUFDO0FBQzNDLE9BQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxZQUFZLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztDQUNuRSxDQUFDLENBQUM7O0FBRUgsTUFBTSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMiLCJmaWxlIjoiZmlsZS1hc3luYy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCQiBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgZXh0cmEgZnJvbSAnZnMtZXh0cmEnO1xuXG52YXIgZmluYWwgPSB7XG4gIGV4aXN0c0NhbGxiYWNrOiBleHRyYS5leGlzdHMuYmluZChleHRyYSksXG4gIGV4aXN0czogZnVuY3Rpb24gKGZ1bGxfcGF0aCkge1xuICAgIHJldHVybiBuZXcgQkIuUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdGhpcy5leGlzdHNDYWxsYmFjayhmdWxsX3BhdGgsIHJlc29sdmUpO1xuICAgIH0pO1xuICB9LFxufTtcblxudmFyIGFzeW5jX21ldGhvZHMgPSBbXTtcbnZhciBhc3luY19vYmplY3QgID0gQkIucHJvbWlzaWZ5QWxsKGV4dHJhLCB7XG4gIC8vIFNraXAgLipTeW5jIG1ldGhvZHNcbiAgZmlsdGVyOiAobmFtZSwgZnVuYywgdGFyZ2V0LCBwYXNzZXNEZWZhdWx0RmlsdGVyKSA9PiB7XG4gICAgaWYgKHBhc3Nlc0RlZmF1bHRGaWx0ZXIgJiYgdGFyZ2V0ID09PSBleHRyYSAmJiAhZmluYWxbbmFtZV0pIHtcbiAgICAgIGlmIChuYW1lLm1hdGNoKC9TeW5jJC8pKSB7XG4gICAgICAgIGZpbmFsW25hbWVdID0gZXh0cmFbbmFtZV0uYmluZChleHRyYSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhc3luY19tZXRob2RzLnB1c2gobmFtZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG59KTtcblxuLy8gUmVuYW1lIC4qQXN5bmMgbWV0aG9kc1xuYXN5bmNfbWV0aG9kcy5mb3JFYWNoKChtZXRob2QpID0+IHtcbiAgZmluYWxbbWV0aG9kICsgXCJDYWxsYmFja1wiXSA9IGV4dHJhW21ldGhvZF07XG4gIGZpbmFsW21ldGhvZF0gPSBhc3luY19vYmplY3RbbWV0aG9kICsgXCJBc3luY1wiXS5iaW5kKGFzeW5jX29iamVjdCk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmaW5hbDtcbiJdLCJzb3VyY2VSb290IjoiZmlsZS1hc3luYy0wLjIuMCAtIHNyYyJ9
